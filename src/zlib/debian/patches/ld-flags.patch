Index: zlib/configure
===================================================================
--- zlib.orig/configure	2009-12-24 18:09:43.000000000 +0300
+++ zlib/configure	2011-09-06 22:43:50.276003970 +0400
@@ -82,7 +82,7 @@
     uname=`(uname -s || echo unknown) 2>/dev/null`
   fi
   case "$uname" in
-  Linux | linux | GNU | GNU/*) LDSHARED=${LDSHARED-"$cc -shared -Wl,-soname,libz.so.1,--version-script,zlib.map"} ;;
+  Linux | linux | GNU | GNU/*) LDSHARED=${LDSHARED-"$cc $SFLAGS -shared -Wl,-soname,libz.so.1,--version-script,zlib.map"} ;;
   CYGWIN* | Cygwin* | cygwin* | OS/2* )
              EXE='.exe' ;;
   QNX*)  # This is for QNX6. I suppose that the QNX rule below is for QNX2,QNX4
