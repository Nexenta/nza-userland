# DP: Turn on -Wformat -Wformat-security by  default for C, C++, ObjC, ObjC++.

---
 gcc/c-common.c      |    2 +-
 gcc/c.opt           |    2 +-
 gcc/doc/invoke.texi |    8 ++++++++
 3 files changed, 10 insertions(+), 2 deletions(-)

--- a/src/gcc/c-common.c
+++ b/src/gcc/c-common.c
@@ -300,7 +300,7 @@ int warn_unknown_pragmas; /* Tri state variable.  */
 /* Warn about format/argument anomalies in calls to formatted I/O functions
    (*printf, *scanf, strftime, strfmon, etc.).  */
 
-int warn_format;
+int warn_format = 1;
 
 /* Warn about using __null (as NULL in C++) as sentinel.  For code compiled
    with GCC this doesn't matter as __null is guaranteed to have the right
--- a/src/gcc/c.opt
+++ b/src/gcc/c.opt
@@ -236,7 +236,7 @@ C ObjC C++ ObjC++ Var(warn_format_contains_nul) Warning
 Warn about format strings that contain NUL bytes
 
 Wformat-security
-C ObjC C++ ObjC++ Var(warn_format_security) Warning
+C ObjC C++ ObjC++ Var(warn_format_security) Init(1) Warning
 Warn about possible security problems with format functions
 
 Wformat-y2k
