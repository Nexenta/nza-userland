# Description: options for freetype sub-pixel filter configuration
# Upstream: https://bugs.freedesktop.org/show_bug.cgi?id=13566
#
---
 fontconfig/fontconfig.h |    6 ++++++
 src/fcint.h             |    3 ++-
 src/fcname.c            |    8 +++++++-
 3 files changed, 15 insertions(+), 2 deletions(-)

Index: fontconfig-2.5.0/fontconfig/fontconfig.h
===================================================================
--- fontconfig-2.5.0.orig/fontconfig/fontconfig.h
+++ fontconfig-2.5.0/fontconfig/fontconfig.h
@@ -107,16 +107,17 @@
 #define FC_STYLELANG	    "stylelang"		/* String RFC 3066 langs */
 #define FC_FULLNAMELANG	    "fullnamelang"	/* String RFC 3066 langs */
 #define FC_CAPABILITY       "capability"	/* String */
 #define FC_FONTFORMAT	    "fontformat"	/* String */
 #define FC_EMBOLDEN	    "embolden"		/* Bool - true if emboldening needed*/
 #define FC_EMBEDDED_BITMAP  "embeddedbitmap"	/* Bool - true to enable embedded bitmaps */
 #define FC_DECORATIVE	    "decorative"	/* Bool - true if style is a decorative variant */
 #define FC_ANY_METRICS      "anymetrics"	/* Bool - true to allow metrics which do not match the requested font */
+#define FC_LCD_FILTER       "lcdfilter"	/* Int */
 
 #define FC_CACHE_SUFFIX		    ".cache-"FC_CACHE_VERSION
 #define FC_DIR_CACHE_FILE	    "fonts.cache-"FC_CACHE_VERSION
 #define FC_USER_CACHE_FILE	    ".fonts.cache-"FC_CACHE_VERSION
 
 /* Adjust outline rasterizer */
 #define FC_CHAR_WIDTH	    "charwidth"	/* Int */
 #define FC_CHAR_HEIGHT	    "charheight"/* Int */
@@ -162,16 +163,21 @@
 /* sub-pixel order */
 #define FC_RGBA_UNKNOWN	    0
 #define FC_RGBA_RGB	    1
 #define FC_RGBA_BGR	    2
 #define FC_RGBA_VRGB	    3
 #define FC_RGBA_VBGR	    4
 #define FC_RGBA_NONE	    5
 
+#define FC_LCD_FILTER_NONE    0
+#define FC_LCD_FILTER_DEFAULT 1
+#define FC_LCD_FILTER_LIGHT   2
+#define FC_LCD_FILTER_LEGACY  3
+
 /* hinting style */
 #define FC_HINT_NONE        0
 #define FC_HINT_SLIGHT      1
 #define FC_HINT_MEDIUM      2
 #define FC_HINT_FULL        3
  
 typedef enum _FcType {
     FcTypeVoid, 
Index: fontconfig-2.5.0/src/fcint.h
===================================================================
--- fontconfig-2.5.0.orig/src/fcint.h
+++ fontconfig-2.5.0/src/fcint.h
@@ -859,17 +859,18 @@
 #define FC_CHARSET_OBJECT	33
 #define FC_LANG_OBJECT		34
 #define FC_FONTVERSION_OBJECT	35
 #define FC_CAPABILITY_OBJECT	36
 #define FC_FONTFORMAT_OBJECT	37
 #define FC_EMBOLDEN_OBJECT	38
 #define FC_EMBEDDED_BITMAP_OBJECT	39
 #define FC_DECORATIVE_OBJECT	40
-#define FC_MAX_BASE_OBJECT	FC_DECORATIVE_OBJECT
+#define FC_LCD_FILTER_OBJECT	41
+#define FC_MAX_BASE_OBJECT	FC_LCD_FILTER_OBJECT
 
 FcPrivate FcBool
 FcNameBool (const FcChar8 *v, FcBool *result);
 
 FcPrivate FcBool
 FcObjectValidType (FcObject object, FcType type);
 
 FcPrivate FcObject
Index: fontconfig-2.5.0/src/fcname.c
===================================================================
--- fontconfig-2.5.0.orig/src/fcname.c
+++ fontconfig-2.5.0/src/fcname.c
@@ -70,17 +70,18 @@
     { FC_CHARSET,	FcTypeCharSet },
     { FC_LANG,		FcTypeLangSet },
     { FC_FONTVERSION,	FcTypeInteger },
     { FC_CAPABILITY,	FcTypeString },
     { FC_FONTFORMAT,	FcTypeString },
     { FC_EMBOLDEN,	FcTypeBool },
     { FC_EMBEDDED_BITMAP,   FcTypeBool },
     { FC_DECORATIVE,	FcTypeBool },
-    { FC_ANY_METRICS,	FcTypeBool }, /* 41 */
+    { FC_ANY_METRICS,	FcTypeBool },
+    { FC_LCD_FILTER,	FcTypeInteger, }, /* 42 */
 };
 
 #define NUM_OBJECT_TYPES    (sizeof _FcBaseObjectTypes / sizeof _FcBaseObjectTypes[0])
 
 typedef struct _FcObjectTypeList    FcObjectTypeList;
 
 struct _FcObjectTypeList {
     const FcObjectTypeList  *next;
@@ -431,16 +432,21 @@
     { (FcChar8 *) "autohint",	    "autohint",	    FcTrue },
     { (FcChar8 *) "globaladvance",  "globaladvance",	FcTrue },
     { (FcChar8 *) "outline",	    "outline",	    FcTrue },
     { (FcChar8 *) "scalable",	    "scalable",	    FcTrue },
     { (FcChar8 *) "minspace",	    "minspace",	    FcTrue },
     { (FcChar8 *) "embolden",	    "embolden",	    FcTrue },
     { (FcChar8 *) "embeddedbitmap", "embeddedbitmap",	FcTrue },
     { (FcChar8 *) "decorative",	    "decorative",   FcTrue },
+
+    { (FcChar8 *) "lcdfilternone",    "lcdfilter",  FC_LCD_FILTER_NONE },
+    { (FcChar8 *) "lcdfilterdefault", "lcdfilter",  FC_LCD_FILTER_DEFAULT },
+    { (FcChar8 *) "lcdfilterlight",   "lcdfilter",  FC_LCD_FILTER_LIGHT },
+    { (FcChar8 *) "lcdfilterlegacy",  "lcdfilter",  FC_LCD_FILTER_LEGACY },
 };
 
 #define NUM_FC_CONSTANTS   (sizeof _FcBaseConstants/sizeof _FcBaseConstants[0])
 
 typedef struct _FcConstantList FcConstantList;
 
 struct _FcConstantList {
     const FcConstantList    *next;
