Index: apt/apt-pkg/deb/debversion.cc
===================================================================
--- apt.orig/apt-pkg/deb/debversion.cc	2011-04-15 11:30:33.000000000 +0400
+++ apt/apt-pkg/deb/debversion.cc	2011-09-05 22:46:38.842731818 +0400
@@ -127,6 +127,19 @@
 int debVersioningSystem::DoCmpVersion(const char *A,const char *AEnd,
 				      const char *B,const char *BEnd)
 {
+   // Consider NCP4 version 40-* > any debian version
+   // This avoids version conflicts while migrating to 40-x-x scheme
+   int a_is_ncp4 = strncmp(A, "40-", 3);
+   int b_is_ncp4 = strncmp(B, "40-", 3);
+
+   if ((a_is_ncp4 == 0) && (b_is_ncp4 != 0))
+      return 1;
+   if ((a_is_ncp4 != 0) && (b_is_ncp4 == 0))
+      return -1;
+
+   // If both A and B are NCP4 or Debian versions,
+   // compare as usual:
+
    // Strip off the epoch and compare it 
    const char *lhs = A;
    const char *rhs = B;
