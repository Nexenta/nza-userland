diff -urN reprepro-4.12.3.orig/adirent.h reprepro-4.12.3/adirent.h
--- reprepro-4.12.3.orig/adirent.h	1970-01-01 05:30:00.000000000 +0530
+++ reprepro-4.12.3/adirent.h	2011-04-23 10:53:32.000000000 +0530
@@ -0,0 +1,44 @@
+#ifndef	_ADIRENT_H
+#define	_ADIRENT_H
+
+#ifdef	__cplusplus
+extern "C" {
+#endif
+
+#include <sys/types.h>
+#include <limits.h>
+#include <dirent.h>
+
+/*
+ * File types for d_type.
+ */
+#define	DT_UNKNOWN	0
+#define	DT_FIFO		1
+#define	DT_CHR		2
+#define	DT_DIR		4
+#define	DT_BLK		6
+#define	DT_REG		8
+#define	DT_LNK		10
+#define	DT_SOCK		12
+#define	DT_WHT		14
+
+#define	DIRENT	struct adirent
+
+struct adirent {
+	offset_t	d_ino;
+	offset_t	d_off;
+	uchar_t		d_type;
+	uint16_t	d_reclen;
+	char		d_name[PATH_MAX];
+};
+
+#define READDIR	areaddir
+
+DIRENT *READDIR(DIR *);
+
+
+#ifdef	__cplusplus
+}
+#endif
+
+#endif	/* _ADIRENT_H */
diff -urN reprepro-4.12.3.orig/configparser.c reprepro-4.12.3/configparser.c
--- reprepro-4.12.3.orig/configparser.c	2012-09-07 14:17:05.391070283 +0530
+++ reprepro-4.12.3/configparser.c	2012-09-07 14:36:49.287364724 +0530
@@ -458,7 +458,7 @@
 
 	if (isdirectory(fullfilename)) {
 		DIR *dir;
-		struct dirent *de;
+		struct adirent *de;
 		int e;
 		char *subfilename;
 
diff -urN reprepro-4.12.3.orig/configparser.h reprepro-4.12.3/configparser.h
--- reprepro-4.12.3.orig/configparser.h	2012-09-07 14:17:05.400690332 +0530
+++ reprepro-4.12.3/configparser.h	2012-09-07 14:37:47.966442837 +0530
@@ -11,6 +11,8 @@
 #include "atoms.h"
 #endif
 
+#include "adirent.h"
+
 struct configiterator;
 
 typedef retvalue configsetfunction(void *, const char *, void *, struct configiterator *);
